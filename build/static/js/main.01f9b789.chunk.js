(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{22:function(e,t,a){e.exports=a(41)},27:function(e,t,a){},28:function(e,t,a){},40:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAEsklEQVR4nO2bz29VRRTHP9UXMEEwxpYfrlzyDxiJQdvgRmSDBCrERBdqJJJgQiVGxEg0xGcC/huwNARWpkWqYjRUdKUJJk2KyEKjpakbsT4Xc8Z73/TOnbn3nrl92n6TSTt3Zs73nDMzZ361sIY1aGIrcBr4DlgEekppEfgWeB/Y3Jo1FTEO3EHPaF+aB/a3ZFM0DgBLGAU/BkaBDYryNwBjwAXh+IsBcsJW4HeMYm+2wHdCuH4DtrTAF8R7ZD0PsA74EPgZvWF/C+iKbICL8v1UUssiMYNRZlTyXdLN/65w7JL8TFLLAtgDXCab+/fL91uSf1yRayfZSADYJPklYAp4RpErCieBv+nvHQs3rwUfT090OZGAsxBjQvoncKxEMW34eCZElx7wZALeZZgSsmMBxbRRxvOG/P5JAt5lsDu84QjFoH9VcKM5FeqV8YzI7wuVramBkMFuvmhV6LIcoXpVeZOhqiJ2VXiU5dGcCvWSOOCeqg2AP+TncGmtYq4hxXp5jMjPxYrtasEGwQnJ15kCHxTIDdUr4zlOi0EwvwxOBBQDE8i6mOEcCoJl9Xw8x4G7tLgMArzN4G2E3tImfESEz3rK7VZ4pR1wGf9WuJEuIQeEFNNGHZ5WlsYFIXEPQzsVOZ6gf1m0h6E7ihy1cR2jzJjkUx6H7arwlOSvaRoSO1zcevZC5ILk89Fcy3B3Vbgk399V0L+xgBGyy9A2jqTvCNc8/Zuxxg6wh5yNJY0fkDruoWMf2cXIRcyNTZmcqtiIGfa255eAvU6dJvoD8JUUuoLzGJc6VwvK9mF6JdX8t2keeDaB/hyVwh+ABwvKHwJuSp3XPATDmIvKa2Srg0ZaEJmnRI8k+q8ni+hzmLv+TZLGc41nKN7KxsI3B5uu2Sr6bwO+wd8TM5h3gCZI5QBQ0n8dcAQzT2zDq5hh4/PcfcDrwNeY43Kq+b+ImetHMT2upb8XMb3yMObhMnXwc9N1TI831b+RgPWYl+AecAM4qEEa0OWgcPUww72sV5M7wEbeG2S3MqkdAOaJ3DrhSGSbxqRF+FLKD0S2cctC+bK2z5HNbx8aO8AuHaE0kmvTlgM2R+o2V2JfELuJc0KsA5qgjgPmgKcT6PIvJoVovERRLbhybcCdTMAVjVfIgqD92x2fA74g3GM2fVbQ3g2CP0r+ZQU7aqODUbYnCh3C74Cq67yv/SEy46eBe9WsqYltZE6IMSCEWAdO03xbroYOZijamFDkiLoOcOVNAi+h1PNVn6Bi4Bo55HwPcbr1fPJU0NEU5kBLUZ8jVFDncfR/hZQOeIHiEVY1+ndE1n8Gn5MZ8ynZEC5aKXxpWtoMAVcKvg80OsCLwK8YpXc0kLVDZPyCf0QNLM5ilD/bQMZHIuOMikYtw/aeRnqsZd1VMET/83ndNEWa/cqKoelWWRWrfh/QVlTdjnk+H8198/X2OczSdwX4PrFeKtgD/EQ2hGeB54FXMcY0+b+B28B54LDInM2V3cTcWK04Yq7MbmOccRgzGnzYLnXOSZuQ3Eb3fVrwHV9jDA4h75C6x+vkaEuxJDwpg+BA9E4Iq34Z1EBREEwRnNriqQz38STVY0RbPGtYVfgHLimZ3zgMymMAAAAASUVORK5CYII="},41:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(18),s=a.n(c),o=(a(27),a(5)),i=(a(28),a(10)),u=a.n(i),l=(a(29),a(31),a(32),a(19));function m(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"0px",margin:"0px"}},r.a.createElement("h2",{style:{padding:"0px",margin:"0px",float:"left"}},"Darpan"),r.a.createElement("p",{style:{padding:"0px",margin:"5px"}},"Your personal mirror assistant")),r.a.createElement("p",{style:{float:"right"}},e.name?"hey, ".concat(e.name):""))}var E=a(8),d=a.n(E);function f(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"sign-in",onClick:function(){var t=new d.a.auth.GoogleAuthProvider;e.auth.signInWithPopup(t)}},"Sign in with Google"))}function g(e){return Object(n.useEffect)((function(){e.setName("")}),[e.auth.currentUser]),e.auth.currentUser&&r.a.createElement("button",{className:"sign-out",onClick:function(){return e.auth.signOut()}},"Sign Out")}var p=a(12),h=a.n(p),A=a(20),b=a(21);function v(e){var t=e.message,c=t.text,s=t.sendBy,i=(e.name.name,"user"===s?"sent":"received"),u=Object(n.useState)(""),l=Object(o.a)(u,2),m=l[0],E=l[1];return Object(n.useEffect)((function(){var t=e.name.split(" ");E("user"===s?t[0]:"Bot")}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"message ".concat(i)},r.a.createElement("img",{alt:"image",src:"Bot"===m?a(40):"https://ui-avatars.com/api/?name=".concat(m)}),r.a.createElement("p",null,c)))}function O(e){var t=Object(n.useRef)(),a=Object(n.useRef)(null),c=e.auth,s=e.firestore.collection("messages"),i=s.orderBy("createdAt"),u=Object(b.a)(i,{idField:"id"}),l=Object(o.a)(u,1)[0],m=Object(n.useState)(""),E=Object(o.a)(m,2),f=E[0],g=E[1],p=Object(n.useState)(!1),O=Object(o.a)(p,2),w=O[0],x=O[1];Object(n.useEffect)((function(){console.log("messages==>",l),t.current.scrollIntoView({behavior:"smooth"})}),[l]),Object(n.useEffect)((function(){e.setName(e.auth.currentUser.displayName),a.current.focus()}),[]);var B=function(){var e=Object(A.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),x(!0),r=c.currentUser.uid,g(""),e.next=7,s.add({text:f,createdAt:d.a.firestore.FieldValue.serverTimestamp(),sendBy:"user",uid:r});case 7:return e.next=9,s.add({text:f,createdAt:d.a.firestore.FieldValue.serverTimestamp(),sendBy:"bot",uid:r});case 9:t.current.scrollIntoView({behavior:"smooth"}),x(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("found an error",e.t0);case 16:return e.prev=16,a.current.focus(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,l&&l.map((function(t){return r.a.createElement(r.a.Fragment,null,t.uid===c.currentUser.uid&&r.a.createElement(v,{key:t.id,message:t,name:e.name}))})),r.a.createElement("span",{ref:t})),r.a.createElement("form",{onSubmit:B},r.a.createElement("input",{ref:a,disabled:w,value:f,onChange:function(e){return g(e.target.value)},placeholder:"Type your message here"}),r.a.createElement("button",{type:"submit",className:"send",disabled:!f},"Send")))}u.a.initializeApp({apiKey:"AIzaSyA5V7_3OEuvZWMUnN_9eHs2pYoYrGCVCsU",authDomain:"mirror-chat-942e2.firebaseapp.com",projectId:"mirror-chat-942e2",storageBucket:"mirror-chat-942e2.appspot.com",messagingSenderId:"122188895576",appId:"1:122188895576:web:d5758ee5717aae5f61812d",measurementId:"G-FXFYEKZ2VF"});var w=u.a.auth(),x=u.a.firestore();var B=function(){var e=Object(l.a)(w),t=Object(o.a)(e,1)[0],a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],i=c[1];return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(m,{name:s}),r.a.createElement(g,{auth:w,setName:i})),r.a.createElement("section",{className:"container"},t?r.a.createElement(O,{setName:i,name:s,firestore:x,auth:w}):r.a.createElement(f,{auth:w})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.01f9b789.chunk.js.map